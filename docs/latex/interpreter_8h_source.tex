\doxysection{interpreter.\+h}
\hypertarget{interpreter_8h_source}{}\label{interpreter_8h_source}\index{include/interpreter.h@{include/interpreter.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{exceptions_8h}{exceptions.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{interpreter__helpers_8h}{interpreter\_helpers.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}local\_function.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}visitor.h"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }InterpreterVisitor\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classVisitor}{Visitor}}\ \{}
\DoxyCodeLine{00017\ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00018\ \ \ \ \ \mbox{\hyperlink{interpreter__helpers_8h_a2510b2edc139843ff4194c43706d0b9a}{ValType}}\ current\_value;\ \ \ \ \ \ \ \ \textcolor{comment}{//<\ value\ returned\ by\ an\ expression/function/identifier}}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{interpreter__helpers_8h_aa4bfd8ebad1ce848d9f39eec760c74de}{TypeType}}\ current\_type;\ \ \ \ \ \ \ \ \textcolor{comment}{//<\ currently\ interpreted\ type}}
\DoxyCodeLine{00020\ \ \ \ \ std::weak\_ptr<Variable>\ var;\ \ \textcolor{comment}{//<\ variable\ pointer,\ received\ from\ an\ identifier}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{interpreter__helpers_8h_ab603d1b1c93a5d8264130588ee6fe1f0}{ReceivedBy}}\ receiver;\ \ \textcolor{comment}{//<\ indicator\ of\ where\ we\ got\ current\_value\ from}}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{bool}\ returning\ =}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{keyword}{false};\ \ \textcolor{comment}{//<\ indicator\ telling\ us\ whether\ we\ are\ currently\ returning\ from\ a\ function}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ std::vector<std::shared\_ptr<Callable>>}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ functions;\ \ \textcolor{comment}{//<\ vector\ of\ available\ global\ functions\ (either\ user-\/defined\ or\ built-\/in)}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{auto}\ decorate(\mbox{\hyperlink{interpreter__helpers_8h_a2510b2edc139843ff4194c43706d0b9a}{ValType}}\ decorator,\ \mbox{\hyperlink{interpreter__helpers_8h_a2510b2edc139843ff4194c43706d0b9a}{ValType}}\ decoratee)\ -\/>\ \mbox{\hyperlink{interpreter__helpers_8h_a2510b2edc139843ff4194c43706d0b9a}{ValType}};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInterpreterVisitor_af03fe2f7b300c8e9f4b40801b2fde7b2}{register\_function}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFunction}{Function}}\ *func);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ std::vector<CallStackFrame>\ call\_stack;\ \ \textcolor{comment}{//<\ \ the\ call\ stack,\ growing\ with\ each\ function\ call}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInterpreterVisitor_abeb013ef80c5d0e5eafb7ecd4df2bd9e}{register\_var}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classVariableSignature}{VariableSignature}}\ \&signature);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInterpreterVisitor_a8caa326b681d798a51ee3d389c1bb5a8}{modify\_var}}(\textcolor{keyword}{const}\ std::string\ \&identifier);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classInterpreterVisitor_a1cf18dc1b1114a5386f94a580da906fa}{get\_for\_iterator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structForLoopArgs}{ForLoopArgs}}\ \&args)\ -\/>\ std::weak\_ptr<Variable>;}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classInterpreterVisitor_acfe2d68fde55da614033c1a4cec79e6b}{eval\_condition}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classExpression}{Expression}}\ \&expr)\ -\/>\ bool;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ try\_visit(T\ obj)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ obj-\/>accept(*\textcolor{keyword}{this});}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\mbox{\hyperlink{classInterpreterError}{InterpreterError}}\ \&e)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classGeneralError}{GeneralError}}(obj-\/>get\_position(),\ e.what());}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00067\ \ \ \ \ InterpreterVisitor()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00072\ \ \ \ \ InterpreterVisitor(std::vector<std::shared\_ptr<Callable>>\ builtins);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classProgram}{Program}}\ \&program)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classLiteralExpr}{LiteralExpr}}\ \&expr)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classIdentifierExpr}{IdentifierExpr}}\ \&expr)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classUnaryExpr}{UnaryExpr}}\ \&expr)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBinaryExpr}{BinaryExpr}}\ \&expr)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classCallExpr}{CallExpr}}\ \&expr)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBindFrtExpr}{BindFrtExpr}}\ \&expr)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classForLoopStatement}{ForLoopStatement}}\ \&stmt)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classWhileLoopStatement}{WhileLoopStatement}}\ \&stmt)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classConditionalStatement}{ConditionalStatement}}\ \&stmt)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classElseStatement}{ElseStatement}}\ \&stmt)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classRetStatement}{RetStatement}}\ \&stmt)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classCallStatement}{CallStatement}}\ \&stmt)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classAssignStatement}{AssignStatement}}\ \&stmt)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBlock}{Block}}\ \&block)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classVarType}{VarType}}\ \&var)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFuncType}{FuncType}}\ \&func)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classVariableSignature}{VariableSignature}}\ \&var)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ (void)var;}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFuncSignature}{FuncSignature}}\ \&sign)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ (void)sign;}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{void}\ visit(\textcolor{keyword}{const}\ \mbox{\hyperlink{classFunction}{Function}}\ \&func)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00107\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classInterpreterVisitor_a8b9f8fba9b1a65b20543bebd0d174ccf}{get\_value}}()\ \textcolor{keyword}{const}\ -\/>\ \mbox{\hyperlink{interpreter__helpers_8h_a2510b2edc139843ff4194c43706d0b9a}{ValType}};}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInterpreterVisitor_ae83b4c2ca1e445c7b11ff542f0ebb99a}{override\_value}}(\mbox{\hyperlink{interpreter__helpers_8h_a2510b2edc139843ff4194c43706d0b9a}{ValType}}\ val);}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInterpreterVisitor_a7e500ad049676cbd7db037d374c74cbf}{push\_call\_stack}}(\mbox{\hyperlink{structCallStackFrame}{CallStackFrame}}\ frame);}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classInterpreterVisitor_ac8dd77c9386ed9769c5e39be63db18ec}{pop\_call\_stack}}();}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classInterpreterVisitor_acfec7cfe81ed34a7a65ad652a6b17a7b}{find\_var\_in\_frame}}(\textcolor{keyword}{const}\ std::string\ \&name)\ -\/>\ std::weak\_ptr<Variable>;}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classInterpreterVisitor_a2255c2ce2c2d9a6b18c629f75456c3ae}{find\_func}}(\textcolor{keyword}{const}\ std::string\ \&name)\ -\/>\ std::shared\_ptr<Callable>;}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classInterpreterVisitor_a9b5b6f350acfa4edc1142d9957e0a5fb}{init\_var}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classType}{Type}}\ \&type)\ -\/>\ \mbox{\hyperlink{interpreter__helpers_8h_a2510b2edc139843ff4194c43706d0b9a}{ValType}};}
\DoxyCodeLine{00138\ \};}

\end{DoxyCode}
